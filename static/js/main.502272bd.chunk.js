(this["webpackJsonpmy-first-cli-proj"]=this["webpackJsonpmy-first-cli-proj"]||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(31),c=n.n(o),s=n(16),i=n(6),u=n(7),p=n(9),l=n(8),m=n(3),h=n(2),d=n.n(h),j=n(5),f=n.p+"static/media/businessman.0c4b33ee.png",b=n.p+"static/media/remove.75637132.png",v=n(0),g=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.companie;t.idx;return n?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("td",{children:Object(v.jsx)("img",{src:n.logo?n.logo:"no logo found"})}),Object(v.jsx)("td",{children:n.name}),Object(v.jsx)("td",{children:n.symbol}),Object(v.jsx)("td",{children:Object(v.jsxs)("span",{className:"employees",children:[Object(v.jsx)("span",{children:n.employees?n.employees:"-"}),Object(v.jsx)("img",{src:f})]})}),Object(v.jsx)("td",{children:n.country}),Object(v.jsx)("td",{onClick:function(){e.props.onRemoveCompanie(n._id)},children:Object(v.jsx)("img",{className:"remove-img",src:b})})]}):Object(v.jsx)("div",{})}}]),n}(a.Component);function y(e){var t=e.companies,n=e.onRemoveCompanie;return Object(v.jsx)(v.Fragment,{children:t.map((function(e,t){return Object(v.jsx)("tr",{children:Object(v.jsx)(g,{onRemoveCompanie:n,companie:e,idx:t},e._id)},e._id)}))})}var O=function(e){var t=e.children;return Object(v.jsx)("div",{className:"main-container",children:t})},x=n(32);var w={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)},removeFromStorage:function(e){localStorage.removeItem(e)}},C={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],n="";for(;e>0;)e--,n+=t[Math.floor(Math.random()*t.length)]+" ";return n},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},storeToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t)||null)},loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}};var k=n(20),S=n.n(k),D=[],N={getCompanieData:function(e){return I.apply(this,arguments)},getCompanieDateSearch:function(e){return _.apply(this,arguments)}};function I(){return(I=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if(!(D=w.loadFromStorage([t]))){e.next=7;break}return D.length&&(D=D[0]),console.log("No need to fetch, retrieving from Cache"),e.abrupt("return",D);case 7:return e.prev=7,e.next=10,S.a.get("https://api.polygon.io/v1/meta/symbols/".concat(t,"/company?apiKey=pv_VVp9rQJ7d8X4aU0wI8Fw2W_GHWVOD"));case 10:return(n=e.sent).data._id=C.makeId(),e.next=14,w.saveToStorage([t],n.data);case 14:return e.abrupt("return",n.data);case 17:e.prev=17,e.t0=e.catch(7),console.log("Cannwot reach server:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[7,17]])})))).apply(this,arguments)}function _(){return(_=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if(!(D=w.loadFromStorage([t+"SERCH"]))){e.next=6;break}return console.log("No need to fetch, retrieving from Cache"),e.abrupt("return",D);case 6:return e.prev=6,e.next=9,S.a.get("https://api.polygon.io/v3/reference/tickers?search=".concat(t,"&active=true&sort=ticker&order=asc&limit=5&apiKey=pv_VVp9rQJ7d8X4aU0wI8Fw2W_GHWVOD"));case 9:return n=e.sent,e.next=12,w.saveToStorage([t+"SERCH"],n.data.results);case 12:return n.data.results.map((function(e){e._id=C.makeId()})),e.abrupt("return",n.data.results);case 16:e.prev=16,e.t0=e.catch(6),console.log("Cannwot reach server:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var A=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.companie,n=e.addNewCompanie;return Object(v.jsxs)("div",{className:"result-preview",children:[Object(v.jsx)("span",{children:t.name.length<25?t.name:t.name.slice(0,50)+"..."}),Object(v.jsx)("button",{onClick:function(){n(t)},children:"add"})]})}}]),n}(a.Component);function M(e){var t=e.addNewCompanie,n=e.companies;return Object(v.jsx)("div",{className:"list-results",children:n.map((function(e,n){return Object(v.jsx)(A,{addNewCompanie:t,companie:e,idx:n},n)}))})}var T=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={companiesData:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.companiesData;this.setState({companiesData:e})}},{key:"componentDidUpdate",value:function(e){if(this.props.companiesData!==e.companiesData){var t=this.props.companiesData;this.setState({companiesData:t})}}},{key:"render",value:function(){var e=this.state.companiesData;return e&&e.length?Object(v.jsx)("section",{className:"search-result-container",children:e.length&&Object(v.jsx)(M,{addNewCompanie:this.props.addNewCompanie,companies:e.slice(0,5)})}):Object(v.jsx)("div",{children:"No results found"})}}]),n}(a.Component),E=n(61),F=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={keySearch:null,isOnSearch:!1,companiesData:null},e.delayedHandleChange=E.debounce(Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.keySearch){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,N.getCompanieDateSearch(e.state.keySearch.toUpperCase());case 4:(n=t.sent)||Object(x.a)("result"),e.setState({companiesData:n},(function(){e.setState({isOnSearch:!0})}));case 7:case"end":return t.stop()}}),t)}))),700),e.handleChange=function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.target,e.setState({keySearch:a.value},(function(){""!==e.state.keySearch&&" "!==e.state.keySearch?e.delayedHandleChange(e.state.keySearch):e.setState({isOnSearch:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isOnSearch,n=e.companiesData;return Object(v.jsxs)("section",{className:"search-container",children:[Object(v.jsx)("input",{type:"text",placeholder:"Search companie",onChange:this.handleChange}),t&&Object(v.jsx)(T,{addNewCompanie:this.props.addNewCompanie,companiesData:n})]})}}]),n}(a.Component),R=n(35),P={query:V,get:function(e,t){return J.apply(this,arguments)},remove:function(e,t){return U.apply(this,arguments)},post:function(e,t){return H.apply(this,arguments)},put:function(e,t){return W.apply(this,arguments)},insert:function(e,t){return G.apply(this,arguments)}};function V(e){var t=C.loadFromStorage(e);return t&&t.length||(t=[{name:"Apple Inc.",symbol:"AAPL",country:"usa",employees:"123000",logo:"https://s3.polygon.io/logos/aapl/logo.png",_id:"101a"},{name:"Analog Devices Inc",symbol:"ADI",country:"usa",employees:"15300",logo:"https://s3.polygon.io/logos/adi/logo.png",_id:"102a"},{name:"Automatic Data Processing Inc.",symbol:"ADP",country:"usa",employees:"57000",logo:"https://s3.polygon.io/logos/adp/logo.png",_id:"103a"},{name:"Amyris Inc.",symbol:"AMRS",country:"usa",employees:"414",logo:"https://s3.polygon.io/logos/amrs/logo.png",_id:"104a"},{country:"usa",logo:"https://s3.polygon.io/logos/cmct/logo.png",name:"CIM Commercial Trust Corporation",symbol:"CMCT",_id:"QV23p5"},{country:"usa",employees:"820",logo:"https://s3.polygon.io/logos/kequ/logo.png",name:"Kewaunee Scientific Corporation",symbol:"KEQU",_id:"Z5AYPI"},{country:"usa",employees:"1176",logo:"https://s3.polygon.io/logos/cwt/logo.png",name:"California Water Service Group",symbol:"CWT",_id:"guSDQG"},{country:"usa",employees:"37205",logo:"https://s3.polygon.io/logos/casy/logo.png",name:"Caseys General Stores Inc.",symbol:"CASY",_id:"5EVRDV"},{country:"usa",employees:"945",logo:"https://s3.polygon.io/logos/cpk/logo.png",name:"Chesapeake Utilities Corporation",symbol:"CPK",_id:"T8Md9c"}],C.storeToStorage(e,t)),Promise.resolve(t)}function J(){return(J=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return a=e.sent,e.abrupt("return",a.find((function(e){return e._id===n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:if(a=e.sent,-1!==(r=a.findIndex((function(e){return e._id===n})))){e.next=6;break}throw new Error("something went wrong");case 6:return a.splice(r,1),C.storeToStorage(t,a),e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return a=e.sent,n._id=C.makeId(),a.push(n),C.storeToStorage(t,a),e.abrupt("return",Promise.resolve(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(j.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:if(a=e.sent,-1!==(r=a.findIndex((function(e){return e._id===n._id})))){e.next=6;break}throw new Error("something went wrong");case 6:return a[r]=n,C.storeToStorage(t,a),e.abrupt("return",Promise.resolve(n));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return a=e.sent,n.forEach((function(e){return e._id=C.makeId()})),a.push.apply(a,Object(R.a)(n)),C.storeToStorage(t,a),e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K={on:function(e,t){var n=function(e){var n=e.detail;t(n)};return window.addEventListener(e,n),function(){window.removeEventListener(e,n)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";K.emit("show-user-msg",{txt:e,type:t})}function q(e){Q(e,"success")}function L(e){Q(e,"danger")}window.myBus=K,window.showUserMsg=Q;var B=[{path:"/",component:function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={companiesData:null},e.addNewCompanie=function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.getCompanieData(n.ticker);case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:return a={name:a.name,symbol:a.symbol,country:a.country,logo:a.logo,employees:a.employees},t.next=8,P.post("companie",a);case 8:q("The company was added"),e.loadCompaniesData();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveCompanie=function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.remove("companie",n);case 2:a=e.state.companiesData.filter((function(e){return e._id!==n})),e.setState({companiesData:a},(function(){L("The company was removed")}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadCompaniesData=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.query("companie");case 2:n=t.sent,e.setState({companiesData:n});case 4:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadCompaniesData()}},{key:"render",value:function(){var e=this.state.companiesData;return e?Object(v.jsx)(O,{children:Object(v.jsxs)("section",{className:"home",children:[Object(v.jsx)("h1",{className:"title",children:"traded companies in Nasdaq"}),Object(v.jsx)(F,{addNewCompanie:this.addNewCompanie}),Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:Object(v.jsx)("h1",{children:"logo"})}),Object(v.jsx)("th",{children:Object(v.jsx)("h1",{children:"name"})}),Object(v.jsx)("th",{children:Object(v.jsx)("h1",{children:"ticker"})}),Object(v.jsx)("th",{children:Object(v.jsx)("h1",{children:"employees"})}),Object(v.jsx)("th",{children:Object(v.jsx)("h1",{children:"country"})}),Object(v.jsx)("th",{children:Object(v.jsx)("h1",{})})]},"1")}),Object(v.jsx)("tbody",{children:Object(v.jsx)(y,{onRemoveCompanie:this.onRemoveCompanie,companies:e})})]})]})}):Object(v.jsx)("div",{children:"loading...."})}}]),n}(a.Component),label:"Home \ud83c\udfe0"}],X=n.p+"static/media/ringing.482c1707.png",Y=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=K.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),5e3)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){if(!this.state.msg)return Object(v.jsx)(v.Fragment,{});var e=this.state.msg.type||"";return Object(v.jsxs)("div",{id:"toast",className:"show  ".concat(e),children:[Object(v.jsx)("div",{id:"img",children:Object(v.jsx)("img",{style:{height:"20px",width:"20px"},src:X})}),Object(v.jsxs)("div",{id:"desc",children:[" ",this.state.msg.txt]})]})}}]),n}(r.a.Component),Z=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(v.jsxs)(s.b,{basename:"/",children:[Object(v.jsx)("div",{children:Object(v.jsx)("main",{children:Object(v.jsx)(m.c,{children:B.map((function(e){return Object(v.jsx)(m.a,{exact:!0,component:e.component,path:e.path},e.path)}))})})}),Object(v.jsx)(Y,{})]})}}]),n}(r.a.Component);n(70);c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(s.a,{children:Object(v.jsx)(Z,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.502272bd.chunk.js.map