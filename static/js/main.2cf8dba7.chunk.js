(this["webpackJsonpmy-first-cli-proj"]=this["webpackJsonpmy-first-cli-proj"]||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(31),c=n.n(o),s=n(16),i=n(10),u=n(11),p=n(13),l=n(12),h=n(3),d=n(2),m=n.n(d),f=n(5),j=n(0),b=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.companie.name),console.log(this.props.companie.symbol),console.log(this.props.companie.country),console.log(this.props.companie.employees)}},{key:"render",value:function(){var e=this.props,t=e.companie;e.idx;return t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("td",{children:Object(j.jsx)("img",{src:t.logo})}),Object(j.jsx)("td",{children:t.name}),Object(j.jsx)("td",{children:t.symbol}),Object(j.jsx)("td",{children:t.country}),Object(j.jsx)("td",{children:t.employees})]}):Object(j.jsx)("div",{})}}]),n}(r.Component);function v(e){var t=e.companies;return Object(j.jsx)(j.Fragment,{children:t.map((function(e,t){return Object(j.jsx)("tr",{children:Object(j.jsx)(b,{companie:e,idx:t},e._id)},e._id)}))})}var g=function(e){var t=e.children;return Object(j.jsx)("div",{className:"main-container",children:t})},y=n(32);var O={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)},removeFromStorage:function(e){localStorage.removeItem(e)}},x={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],n="";for(;e>0;)e--,n+=t[Math.floor(Math.random()*t.length)]+" ";return n},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},storeToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t)||null)},loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}};var w=n(20),k=n.n(w),S=[],C={getCompanieData:function(e){return D.apply(this,arguments)},getCompanieDateSearch:function(e){return I.apply(this,arguments)}};function D(){return(D=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.abrupt("return",[]);case 3:if(!(S=O.loadFromStorage([t]))){e.next=8;break}return S.length&&(S=S[0]),console.log("No need to fetch, retrieving from Cache"),e.abrupt("return",S);case 8:return e.prev=8,e.next=11,k.a.get("https://api.polygon.io/v1/meta/symbols/".concat(t,"/company?apiKey=pv_VVp9rQJ7d8X4aU0wI8Fw2W_GHWVOD"));case 11:return(n=e.sent).data._id=x.makeId(),e.next=15,O.saveToStorage([t],n.data);case 15:return e.abrupt("return",n.data);case 18:e.prev=18,e.t0=e.catch(8),console.log("Cannwot reach server:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[8,18]])})))).apply(this,arguments)}function I(){return(I=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if(!(S=O.loadFromStorage([t]))){e.next=6;break}return console.log("No need to fetch, retrieving from Cache"),e.abrupt("return",S);case 6:return e.prev=6,e.next=9,k.a.get("https://api.polygon.io/v3/reference/tickers?search=".concat(t,"&active=true&sort=ticker&order=asc&limit=5&apiKey=pv_VVp9rQJ7d8X4aU0wI8Fw2W_GHWVOD"));case 9:return n=e.sent,e.next=12,O.saveToStorage([t],n.data.results);case 12:return n.data.results.map((function(e){e._id=x.makeId()})),e.abrupt("return",n.data.results);case 16:e.prev=16,e.t0=e.catch(6),console.log("Cannwot reach server:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var N=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.companie,n=e.addNewCompanie;return Object(j.jsxs)("div",{className:"result-preview",children:[Object(j.jsx)("span",{children:t.name.length<25?t.name:t.name.slice(0,50)+"..."}),Object(j.jsx)("button",{onClick:function(){n(t)},children:"add"})]})}}]),n}(r.Component);function _(e){var t=e.addNewCompanie,n=e.companies;return Object(j.jsx)("div",{className:"list-results",children:n.map((function(e,n){return Object(j.jsx)(N,{addNewCompanie:t,companie:e,idx:n},n)}))})}var A=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={companiesData:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.companiesData;this.setState({companiesData:e})}},{key:"componentDidUpdate",value:function(e){if(this.props.companiesData!==e.companiesData){var t=this.props.companiesData;this.setState({companiesData:t})}}},{key:"render",value:function(){var e=this.state.companiesData;return e&&e.length?Object(j.jsx)("section",{className:"search-result-container",children:e.length&&Object(j.jsx)(_,{addNewCompanie:this.props.addNewCompanie,companies:e.slice(0,5)})}):Object(j.jsx)("div",{children:"No results found"})}}]),n}(r.Component),M=n(61),F=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={keySearch:null,isOnSearch:!1,companiesData:null},e.delayedHandleChange=M.debounce(Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.keySearch){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,C.getCompanieDateSearch(e.state.keySearch.toUpperCase());case 4:(n=t.sent)||Object(y.a)("result"),e.setState({companiesData:n},(function(){e.setState({isOnSearch:!0})}));case 7:case"end":return t.stop()}}),t)}))),700),e.handleChange=function(){var t=Object(f.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target,e.setState({keySearch:r.value},(function(){""!==e.state.keySearch&&" "!==e.state.keySearch?e.delayedHandleChange(e.state.keySearch):e.setState({isOnSearch:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isOnSearch,n=e.companiesData;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"text",onChange:this.handleChange}),t&&Object(j.jsx)(A,{addNewCompanie:this.props.addNewCompanie,companiesData:n})]})}}]),n}(r.Component),T=n(35),J={query:P,get:function(e,t){return V.apply(this,arguments)},remove:function(e,t){return H.apply(this,arguments)},post:function(e,t){return E.apply(this,arguments)},put:function(e,t){return U.apply(this,arguments)},insert:function(e,t){return W.apply(this,arguments)}};function P(e){var t=x.loadFromStorage(e);return t&&t.length||(t=[{name:"Apple Inc.",symbol:"AAPL",country:"usa",employees:"123000",logo:"https://s3.polygon.io/logos/aapl/logo.png",_id:"101a"},{name:"Analog Devices Inc",symbol:"ADI",country:"usa",employees:"15300",logo:"https://s3.polygon.io/logos/adi/logo.png",_id:"102a"},{name:"Automatic Data Processing Inc.",symbol:"ADP",country:"usa",employees:"57000",logo:"https://s3.polygon.io/logos/adp/logo.png",_id:"103a"},{name:"Amyris Inc.",symbol:"AMRS",country:"usa",employees:"414",logo:"https://s3.polygon.io/logos/amrs/logo.png",_id:"104a"}],x.storeToStorage(e,t)),Promise.resolve(t)}function V(){return(V=Object(f.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return r=e.sent,e.abrupt("return",r.find((function(e){return e._id===n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(f.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(r=e.sent,-1!==(a=r.findIndex((function(e){return e._id===n})))){e.next=6;break}throw new Error("something went wrong");case 6:return r.splice(a,1),x.storeToStorage(t,r),e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return(r=e.sent).push(n),x.storeToStorage(t,r),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(f.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(r=e.sent,-1!==(a=r.findIndex((function(e){return e._id===n._id})))){e.next=6;break}throw new Error("something went wrong");case 6:return r[a]=n,x.storeToStorage(t,r),e.abrupt("return",Promise.resolve(n));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(f.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return r=e.sent,n.forEach((function(e){return e._id=x.makeId()})),r.push.apply(r,Object(T.a)(n)),x.storeToStorage(t,r),e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=[{path:"/",component:function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={companiesData:null},e.addNewCompanie=function(){var t=Object(f.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,C.getCompanieData(n.ticker);case 3:if(r=t.sent){t.next=6;break}return t.abrupt("return");case 6:return r={name:r.name,symbol:r.symbol,country:r.country,logo:r.logo},t.next=9,J.post("companie",r);case 9:e.loadCompaniesData();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadCompaniesData=Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.query("companie");case 2:n=t.sent,e.setState({companiesData:n});case 4:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadCompaniesData()}},{key:"render",value:function(){var e=this.state.companiesData;return e?Object(j.jsxs)(g,{children:[Object(j.jsx)(F,{addNewCompanie:this.addNewCompanie}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"logo"}),Object(j.jsx)("th",{children:"name"}),Object(j.jsx)("th",{children:"ticker"}),Object(j.jsx)("th",{children:"country"}),Object(j.jsx)("th",{children:"employees"})]},"1")}),Object(j.jsx)("tbody",{children:Object(j.jsx)(v,{companies:e})})]})]}):Object(j.jsx)("div",{children:"loading...."})}}]),n}(r.Component),label:"Home \ud83c\udfe0"}],G=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)(s.b,{basename:"/",children:Object(j.jsx)("div",{children:Object(j.jsx)("main",{children:Object(j.jsx)(h.c,{children:q.map((function(e){return Object(j.jsx)(h.a,{exact:!0,component:e.component,path:e.path},e.path)}))})})})})}}]),n}(a.a.Component);n(70);c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(s.a,{children:Object(j.jsx)(G,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.2cf8dba7.chunk.js.map