(this["webpackJsonpmy-first-cli-proj"]=this["webpackJsonpmy-first-cli-proj"]||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(30),o=n.n(c),s=n(34),i=n(10),u=n(11),p=n(13),l=n(12),h=n(3),d=n(2),f=n.n(d),m=n(5),j=n(0),b=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.companie)}},{key:"render",value:function(){var e=this.props,t=e.companie,n=e.idx;return t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("td",{children:n}),Object(j.jsx)("td",{children:t.name}),Object(j.jsx)("td",{children:t.ticker}),Object(j.jsx)("td",{children:t.locale}),Object(j.jsx)("td",{children:t.type})]}):Object(j.jsx)("div",{})}}]),n}(r.Component);function v(e){var t=e.companies;return Object(j.jsx)(j.Fragment,{children:t.map((function(e,t){return Object(j.jsxs)("tr",{children:[" ",Object(j.jsx)(b,{companie:e,idx:t},t)]})}))})}var O=function(e){var t=e.children;return Object(j.jsx)("div",{className:"main-container",children:t})},x=n(31);var g={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)},removeFromStorage:function(e){localStorage.removeItem(e)}},y={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],n="";for(;e>0;)e--,n+=t[Math.floor(Math.random()*t.length)]+" ";return n},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},storeToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t)||null)},loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}};var w=n(19),k=n.n(w),S=[],C={getCompanieData:function(e){return D.apply(this,arguments)},getCompanieDateSearch:function(e){return N.apply(this,arguments)}};function D(){return(D=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if(!(S=g.loadFromStorage([t]))){e.next=7;break}return S.length&&(S=S[0]),console.log("No need to fetch, retrieving from Cache"),e.abrupt("return",S);case 7:return e.prev=7,e.next=10,k.a.get("https://api.polygon.io/v1/meta/symbols/".concat(t,"/company?&limit=1&apiKey=pv_VVp9rQJ7d8X4aU0wI8Fw2W_GHWVOD"));case 10:return(n=e.sent).data.results[0]._id=y.makeId(),e.next=14,g.saveToStorage([t],n.data.results[0]);case 14:return e.abrupt("return",n.data.results[0]);case 17:e.prev=17,e.t0=e.catch(7),console.log("Cannwot reach server:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[7,17]])})))).apply(this,arguments)}function N(){return(N=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if(!(S=g.loadFromStorage([t]))){e.next=6;break}return console.log("No need to fetch, retrieving from Cache"),e.abrupt("return",S);case 6:return e.prev=6,e.next=9,k.a.get("https://api.polygon.io/v3/reference/tickers?search=".concat(t,"&active=true&sort=ticker&order=asc&limit=5&apiKey=pv_VVp9rQJ7d8X4aU0wI8Fw2W_GHWVOD"));case 9:return n=e.sent,e.next=12,g.saveToStorage([t],n.data.results);case 12:return e.abrupt("return",n.data.results);case 15:e.prev=15,e.t0=e.catch(6),console.log("Cannwot reach server:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}var I=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.companie,n=e.addNewCompanie;return Object(j.jsxs)("div",{className:"result-preview",children:[Object(j.jsx)("span",{children:t.name.length<25?t.name:t.name.slice(0,50)+"..."}),Object(j.jsx)("button",{onClick:function(){n(t.ticker)},children:"add"})]})}}]),n}(r.Component);function A(e){var t=e.addNewCompanie,n=e.companies;return Object(j.jsx)("div",{className:"list-results",children:n.map((function(e,n){return Object(j.jsx)(I,{addNewCompanie:t,companie:e,idx:n},n)}))})}var M=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={companiesData:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.companiesData;this.setState({companiesData:e})}},{key:"componentDidUpdate",value:function(e){if(this.props.companiesData!==e.companiesData){var t=this.props.companiesData;this.setState({companiesData:t})}}},{key:"render",value:function(){var e=this.state.companiesData;return e&&e.length?Object(j.jsx)("section",{className:"search-result-container",children:e.length&&Object(j.jsx)(A,{addNewCompanie:this.props.addNewCompanie,companies:e.slice(0,5)})}):Object(j.jsx)("div",{children:"No results found"})}}]),n}(r.Component),T=n(61),F=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={keySearch:null,isOnSearch:!1,companiesData:null},e.delayedHandleChange=T.debounce(Object(m.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.keySearch){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,C.getCompanieDateSearch(e.state.keySearch.toUpperCase());case 4:(n=t.sent)||Object(x.a)("result"),e.setState({companiesData:n},(function(){e.setState({isOnSearch:!0})}));case 7:case"end":return t.stop()}}),t)}))),700),e.handleChange=function(){var t=Object(m.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target,e.setState({keySearch:r.value},(function(){""!==e.state.keySearch&&" "!==e.state.keySearch?e.delayedHandleChange(e.state.keySearch):e.setState({isOnSearch:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isOnSearch,n=e.companiesData;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"text",onChange:this.handleChange}),t&&Object(j.jsx)(M,{addNewCompanie:this.props.addNewCompanie,companiesData:n})]})}}]),n}(r.Component),P=n(35),_={query:J,get:function(e,t){return E.apply(this,arguments)},remove:function(e,t){return V.apply(this,arguments)},post:function(e,t){return G.apply(this,arguments)},put:function(e,t){return H.apply(this,arguments)},insert:function(e,t){return W.apply(this,arguments)}};function J(e){var t=y.loadFromStorage(e);return t&&t.length||(t=["ARBE","P","AAPL","ADI","ADP","FB","TSLA","AEP","AMGN","TWTR","GOOGL"],y.storeToStorage(e,t)),Promise.resolve(t)}function E(){return(E=Object(m.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:return r=e.sent,e.abrupt("return",r.find((function(e){return e._id===n})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(m.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:if(r=e.sent,-1!==(a=r.findIndex((function(e){return e._id===n})))){e.next=6;break}throw new Error("something went wrong");case 6:return r.splice(a,1),y.storeToStorage(t,r),e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(m.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:return(r=e.sent).push(n),y.storeToStorage(t,r),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(m.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:if(r=e.sent,-1!==(a=r.findIndex((function(e){return e._id===n._id})))){e.next=6;break}throw new Error("something went wrong");case 6:return r[a]=n,y.storeToStorage(t,r),e.abrupt("return",Promise.resolve(n));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(m.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:return r=e.sent,n.forEach((function(e){return e._id=y.makeId()})),r.push.apply(r,Object(P.a)(n)),y.storeToStorage(t,r),e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=[{path:"/",component:function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={companiesData:null},e.addNewCompanie=function(){var t=Object(m.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.post("companie",n);case 2:e.loadCompaniesData();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadCompaniesData=Object(m.a)(f.a.mark((function t(){var n,r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.query("companie");case 2:return n=t.sent,r=n.map(function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getCompanieData(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=6,Promise.all(r);case 6:a=t.sent,e.setState({companiesData:a});case 8:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadCompaniesData()}},{key:"render",value:function(){var e=this.state.companiesData;return e?Object(j.jsxs)(O,{children:[Object(j.jsx)(F,{addNewCompanie:this.addNewCompanie}),Object(j.jsxs)("table",{children:[Object(j.jsxs)("thead",{children:[Object(j.jsx)("th",{children:"id"}),Object(j.jsx)("th",{children:"name"}),Object(j.jsx)("th",{children:"ticker"}),Object(j.jsx)("th",{children:"locale"}),Object(j.jsx)("th",{children:"type"})]}),Object(j.jsx)("tbody",{children:Object(j.jsx)(v,{companies:e})})]})]}):Object(j.jsx)("div",{children:"loading...."})}}]),n}(r.Component),label:"Home \ud83c\udfe0"}],U=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)("main",{children:Object(j.jsx)(h.c,{children:L.map((function(e){return Object(j.jsx)(h.a,{exact:!0,component:e.component,path:e.path},e.path)}))})})})}}]),n}(a.a.Component);n(70);o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(s.a,{children:Object(j.jsx)(U,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.e320364c.chunk.js.map